// Testing access (but not updates) to array variables

dtmc

const int N;
const int M = N+1;

module M

	x : [0..10];
	y : [0..10];
	
	a1 : array[N] of [0..2];
	a2 : array[N] of [0..4] init 3;
	b1 : array[5] of array[3] of bool;
	b2 : array[5] of array[3] of bool init true;
	c1 : array[6] of array[2] of array[2] of [0..5];
	c2 : array[6] of array[2] of array[2] of [0..5] init 0;
	
	// index of array element is a constant value
	// (some places need strengthened guard for symbolic version for now)
	[] x=0 -> (x'=x+1) & (y'=a1[1]);
	[] x=1 & a2[1]>=a1[1] & a2[1]-a1[1]<=10 -> (x'=x+1) & (y'=a2[1]-a1[1]);
	[] x=2 -> (x'=x+1) & (y'=b1[2][1]?3:4);
	// index of array element is a variable value
	[] x=3 -> (x'=x+1) & (y'=a2[x-2]);
	[] x=4 -> (x'=x+1) & (y'=b1[x-N][1]?3:4);
	// index of array element is another array element
	// (need strengthened guard for symbolic version for now)
	[] x=5 & a2[N-N]>2 & a2[N-N]<4 -> (x'=x+1) & (y'=c1[a1[1]][a2[N-N]-2][0]);

	[] x>5 -> true;
	
endmodule

label "label1" = (x=4 => y=3);
