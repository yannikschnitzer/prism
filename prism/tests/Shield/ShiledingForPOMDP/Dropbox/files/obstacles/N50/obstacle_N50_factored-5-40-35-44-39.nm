pomdp
observables
start
endobservables
const int N = 50;
const int axMAX = N-1;
const int ayMAX = N-1;
const int axMIN = 0;
const int ayMIN = 0;
const int primaryMinX = 40;
const int primaryMinY = 35;
const int primaryMaxX = 44;
const int primaryMaxY = 39;
const int borderSize = 2;
const int areaMinX = max(primaryMinX - borderSize, axMIN);
const int areaMinY = max(primaryMinY - borderSize, ayMIN);
const int areaMaxX = min(primaryMaxX + borderSize, axMAX);
const int areaMaxY = min(primaryMaxY + borderSize, ayMAX);
const double slippery = 0.1;
const int ob7x = 44;
const int ob7y = 41;
const int ob21x = 40;
const int ob21y = 34;
const int ob22x = 46;
const int ob22y = 36;
const int ob35x = 43;
const int ob35y = 39;
const int ob39x = 41;
const int ob39y = 34;
formula crash = start & ((ax = ob7x & ay = ob7y)|(ax = ob21x & ay = ob21y)|(ax = ob22x & ay = ob22y)|(ax = ob35x & ay = ob35y)|(ax = ob39x & ay = ob39y));
formula done = start & (!crash) & ((ax = axMAX & ay = ayMAX) | ax = primaryMaxX + 1 | ax = primaryMaxX + 2 | ay = primaryMaxY + 1 | ay = primaryMaxY + 2 |ax = primaryMinX - 1 | ax = primaryMinX - 2 | ay = primaryMinY - 1 | ay = primaryMinY - 2 ) ;
observable "amdone" = done;
observable "hascrash" = crash;
module master
start : bool init false;
[placement] !start -> (start'=true);
[north] start & !done -> true;
[south] start  & !done -> true;
[east] start  & !done-> true;
[west] start & !done -> true;
endmodule
module robot
ax : [axMIN..axMAX] init axMIN;
ay : [ayMIN..ayMAX] init ayMIN;
//slipped : bool init false;
[placement] true ->1/4:(ax'=primaryMinX) & (ay'=primaryMinY) + 1/4:(ax'=primaryMinX) & (ay'=primaryMaxY) + 1/4:(ax'=primaryMaxX) & (ay'=primaryMinY) + 1/4:(ax'=primaryMaxX) & (ay'=primaryMaxY);
[west] true -> (1-slippery): (ax'=max(ax-1,areaMinX)) + slippery: (ax'=max(ax-2,areaMinX));
[east] true -> (1-slippery): (ax'=min(ax+1,areaMaxX)) + slippery: (ax'=min(ax+2,areaMaxX));
[south]  true -> (1-slippery): (ay'=min(ay+1,areaMaxY)) + slippery: (ay'=min(ay+2,areaMaxY));
[north]  true -> (1-slippery): (ay'=max(ay-1,areaMinY)) + slippery: (ay'=max(ay-2,areaMinY));
endmodule
label "goal" = done;
label "traps" = crash;
label "notbad" =  !crash;
rewards "cost"
[north] true : 1;
[south] true : 1;
[west] true : 1;
[east] true : 1;
crash: 5;
endrewards
rewards "reward"
done : 20;
endrewards
