// Test of array comparison

dtmc

const int N = 2;

const array[N] of int c = [1,1];

module M

	s : [0..1] init 0;
	i : [0..1] init 0;
	a : array[N] of [1..3] init 1;
	b : array[N] of [1..3] init [2,3];

	//c : array[N] of [1..3] init [1,1];
	
	// Randomly update array a until it matches array b
	[] s=0 & i<N & a!=b -> 1/3:(a[i]'=1)&(i'=i+1) + 1/3:(a[i]'=2)&(i'=i+1) + 1/3:(a[i]'=3)&(i'=i+1);
	[] s=0 & i=N & a!=b -> (i'=0);
	[] s=0 & a=b -> (s'=1) & (i'=0);
	// Randomly update array a until it matches array c
	[] s=1 & i<N & a!=c -> 1/3:(a[i]'=1)&(i'=i+1) + 1/3:(a[i]'=2)&(i'=i+1) + 1/3:(a[i]'=3)&(i'=i+1);
	[] s=1 & i=N & a!=c -> (i'=0);
	[] s=1 & a=c -> (s'=2) & (i'=0);
	// Stop
	[] s=2 -> true;
	
endmodule
