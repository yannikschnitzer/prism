mdp
const int N=30; // N*N grid map
const double p=0.1; // with probability p, a move to a neighboring state state occurs due to seeing and control noise

module robot
	//define robot position
	r:[1..N] init 1; //grid row
	c:[1..N] init 1; //grid column

	// go to the terminal state when hitting an obstacle
	[obstacle] (r=10 & c=1) | (r=21 & c=6) | (r=13 & c=2) | (r=11 & c=6) | (r=12 & c=1) | (r=19 & c=2) | (r=11 & c=4) | (r=9 & c=3) | (r=21 & c=1) | (r=24 & c=6) | (r=12 & c=2) | (r=18 & c=1) | (r=11 & c=5) | (r=22 & c=4) | (r=24 & c=5) | (r=8 & c=2) | (r=16 & c=4) | (r=24 & c=1) | (r=7 & c=4) | (r=7 & c=2) | (r=25 & c=6) | (r=17 & c=5) | (r=13 & c=5) | (r=14 & c=4) | (r=22 & c=1) | (r=13 & c=11) | (r=9 & c=1) | (r=24 & c=9) | (r=17 & c=11) | (r=23 & c=8) | (r=7 & c=7) | (r=22 & c=10) | (r=10 & c=10) | (r=14 & c=2) | (r=24 & c=11) | (r=22 & c=7) | (r=18 & c=10) | (r=8 & c=6) | (r=20 & c=5) | (r=22 & c=9) | (r=21 & c=11) | (r=9 & c=4) | (r=9 & c=7) | (r=24 & c=8) | (r=12 & c=9) | (r=15 & c=2) | (r=15 & c=17) | (r=11 & c=12) | (r=17 & c=14) | (r=13 & c=18) | (r=19 & c=14) | (r=21 & c=12) | (r=9 & c=8) | (r=7 & c=13) | (r=24 & c=22) | (r=25 & c=2) | (r=25 & c=18) | (r=17 & c=9) | (r=13 & c=9) | (r=25 & c=15) | (r=8 & c=21) | (r=10 & c=22) | (r=16 & c=14) | (r=16 & c=6) | (r=7 & c=26)-> (r'=30) & (c'=1);

	// transitions
	[east] (c<N | c=N) & !((r=10 & c=1) | (r=21 & c=6) | (r=13 & c=2) | (r=11 & c=6) | (r=12 & c=1) | (r=19 & c=2) | (r=11 & c=4) | (r=9 & c=3) | (r=21 & c=1) | (r=24 & c=6) | (r=12 & c=2) | (r=18 & c=1) | (r=11 & c=5) | (r=22 & c=4) | (r=24 & c=5) | (r=8 & c=2) | (r=16 & c=4) | (r=24 & c=1) | (r=7 & c=4) | (r=7 & c=2) | (r=25 & c=6) | (r=17 & c=5) | (r=13 & c=5) | (r=14 & c=4) | (r=22 & c=1) | (r=13 & c=11) | (r=9 & c=1) | (r=24 & c=9) | (r=17 & c=11) | (r=23 & c=8) | (r=7 & c=7) | (r=22 & c=10) | (r=10 & c=10) | (r=14 & c=2) | (r=24 & c=11) | (r=22 & c=7) | (r=18 & c=10) | (r=8 & c=6) | (r=20 & c=5) | (r=22 & c=9) | (r=21 & c=11) | (r=9 & c=4) | (r=9 & c=7) | (r=24 & c=8) | (r=12 & c=9) | (r=15 & c=2) | (r=15 & c=17) | (r=11 & c=12) | (r=17 & c=14) | (r=13 & c=18) | (r=19 & c=14) | (r=21 & c=12) | (r=9 & c=8) | (r=7 & c=13) | (r=24 & c=22) | (r=25 & c=2) | (r=25 & c=18) | (r=17 & c=9) | (r=13 & c=9) | (r=25 & c=15) | (r=8 & c=21) | (r=10 & c=22) | (r=16 & c=14) | (r=16 & c=6) | (r=7 & c=26))-> p/3:(r'=min(r+1, N))+ p/3: (c'=max(c-1, 1))+ p/3: (r'=max(r-1, 1)) + (1-p): (c'=min(c+1, N));
	[south] (r<N | r=N) & !((r=10 & c=1) | (r=21 & c=6) | (r=13 & c=2) | (r=11 & c=6) | (r=12 & c=1) | (r=19 & c=2) | (r=11 & c=4) | (r=9 & c=3) | (r=21 & c=1) | (r=24 & c=6) | (r=12 & c=2) | (r=18 & c=1) | (r=11 & c=5) | (r=22 & c=4) | (r=24 & c=5) | (r=8 & c=2) | (r=16 & c=4) | (r=24 & c=1) | (r=7 & c=4) | (r=7 & c=2) | (r=25 & c=6) | (r=17 & c=5) | (r=13 & c=5) | (r=14 & c=4) | (r=22 & c=1) | (r=13 & c=11) | (r=9 & c=1) | (r=24 & c=9) | (r=17 & c=11) | (r=23 & c=8) | (r=7 & c=7) | (r=22 & c=10) | (r=10 & c=10) | (r=14 & c=2) | (r=24 & c=11) | (r=22 & c=7) | (r=18 & c=10) | (r=8 & c=6) | (r=20 & c=5) | (r=22 & c=9) | (r=21 & c=11) | (r=9 & c=4) | (r=9 & c=7) | (r=24 & c=8) | (r=12 & c=9) | (r=15 & c=2) | (r=15 & c=17) | (r=11 & c=12) | (r=17 & c=14) | (r=13 & c=18) | (r=19 & c=14) | (r=21 & c=12) | (r=9 & c=8) | (r=7 & c=13) | (r=24 & c=22) | (r=25 & c=2) | (r=25 & c=18) | (r=17 & c=9) | (r=13 & c=9) | (r=25 & c=15) | (r=8 & c=21) | (r=10 & c=22) | (r=16 & c=14) | (r=16 & c=6) | (r=7 & c=26))-> (1-p):(r'=min(r+1, N)) + p/3: (c'=min(c+1, N)) + p/3:(r'=min(r+1, N))+ p/3: (c'=max(c-1, 1));
	[west]  (c>1 | c=1) & !((r=10 & c=1) | (r=21 & c=6) | (r=13 & c=2) | (r=11 & c=6) | (r=12 & c=1) | (r=19 & c=2) | (r=11 & c=4) | (r=9 & c=3) | (r=21 & c=1) | (r=24 & c=6) | (r=12 & c=2) | (r=18 & c=1) | (r=11 & c=5) | (r=22 & c=4) | (r=24 & c=5) | (r=8 & c=2) | (r=16 & c=4) | (r=24 & c=1) | (r=7 & c=4) | (r=7 & c=2) | (r=25 & c=6) | (r=17 & c=5) | (r=13 & c=5) | (r=14 & c=4) | (r=22 & c=1) | (r=13 & c=11) | (r=9 & c=1) | (r=24 & c=9) | (r=17 & c=11) | (r=23 & c=8) | (r=7 & c=7) | (r=22 & c=10) | (r=10 & c=10) | (r=14 & c=2) | (r=24 & c=11) | (r=22 & c=7) | (r=18 & c=10) | (r=8 & c=6) | (r=20 & c=5) | (r=22 & c=9) | (r=21 & c=11) | (r=9 & c=4) | (r=9 & c=7) | (r=24 & c=8) | (r=12 & c=9) | (r=15 & c=2) | (r=15 & c=17) | (r=11 & c=12) | (r=17 & c=14) | (r=13 & c=18) | (r=19 & c=14) | (r=21 & c=12) | (r=9 & c=8) | (r=7 & c=13) | (r=24 & c=22) | (r=25 & c=2) | (r=25 & c=18) | (r=17 & c=9) | (r=13 & c=9) | (r=25 & c=15) | (r=8 & c=21) | (r=10 & c=22) | (r=16 & c=14) | (r=16 & c=6) | (r=7 & c=26))-> p/3:(r'=max(r-1, 1))+ p/3:(r'=min(r+1, N))+ p/3: (c'=min(c+1, N)) + (1-p): (c'=max(c-1, 1));
	[north] (r=1 | r>1) & !((r=10 & c=1) | (r=21 & c=6) | (r=13 & c=2) | (r=11 & c=6) | (r=12 & c=1) | (r=19 & c=2) | (r=11 & c=4) | (r=9 & c=3) | (r=21 & c=1) | (r=24 & c=6) | (r=12 & c=2) | (r=18 & c=1) | (r=11 & c=5) | (r=22 & c=4) | (r=24 & c=5) | (r=8 & c=2) | (r=16 & c=4) | (r=24 & c=1) | (r=7 & c=4) | (r=7 & c=2) | (r=25 & c=6) | (r=17 & c=5) | (r=13 & c=5) | (r=14 & c=4) | (r=22 & c=1) | (r=13 & c=11) | (r=9 & c=1) | (r=24 & c=9) | (r=17 & c=11) | (r=23 & c=8) | (r=7 & c=7) | (r=22 & c=10) | (r=10 & c=10) | (r=14 & c=2) | (r=24 & c=11) | (r=22 & c=7) | (r=18 & c=10) | (r=8 & c=6) | (r=20 & c=5) | (r=22 & c=9) | (r=21 & c=11) | (r=9 & c=4) | (r=9 & c=7) | (r=24 & c=8) | (r=12 & c=9) | (r=15 & c=2) | (r=15 & c=17) | (r=11 & c=12) | (r=17 & c=14) | (r=13 & c=18) | (r=19 & c=14) | (r=21 & c=12) | (r=9 & c=8) | (r=7 & c=13) | (r=24 & c=22) | (r=25 & c=2) | (r=25 & c=18) | (r=17 & c=9) | (r=13 & c=9) | (r=25 & c=15) | (r=8 & c=21) | (r=10 & c=22) | (r=16 & c=14) | (r=16 & c=6) | (r=7 & c=26))-> (1-p):(r'=max(r-1, 1)) + p/3: (c'=max(c-1, 1)) + p/3: (c'=min(c+1, N)) + p/3:(r'=min(r+1, N));

	// terminal state self-loop to avoid deadlock
	[] r=30 & c=1 -> true;
endmodule

label "goal" = r=30 & c=1;

rewards
	[east] true : 1;
	[south] true : 1;
	[west] true : 1;
	[north] true : 1;
	[obstacle] true : 70;
endrewards
